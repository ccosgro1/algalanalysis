title: "Maumee Community Analysis"
author: "Jordyn Stoll"
date: "3/22/2018"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
setwd("~/Documents/GitHub/algalanalysis/algalcommunityanalysis/Community Analysis")
MaumeeMesoComData <- read.csv("~/Desktop/USGS Project/MaumeeMesoComData.csv")
summary(MaumeeMesoComData)
plot(Microcystis.spp.~Treatment, data=MaumeeMesoComData, main='Microcystis Abundance to Nutrient Treatment', ylab='Microcystis % Abundance',las=3)

```

To look at the effect of the nutrient treatments on Microcystis abundance...

```{r}
MicrocystisANOVA<-aov(Microcystis.spp.~Treatment, data=MaumeeMesoComData)
shapiro.test(resid(MicrocystisANOVA))
par(mfrow=c(1,2))
plot(MicrocystisANOVA, which=c(1,2))
summary(MicrocystisANOVA)
TukeyHSD(MicrocystisANOVA)
```

How do I create a new column that has a count of the number of columns not equal to zero (species richness)?

Add packages for analysis
```{r}
library(AICcmodavg)
library(car)
library(nlme)
library(doBy)
library(reshape2)
library(vegan)
library(lmtest)
library(raster)
library(rgdal)
library(dismo)
library(rjava)
library(maptools)
library(ROCR)
library(randomForest)
library(mgcv)
library(maps)
library(sp)
library(SDMTools)
library(rgeos)
library(gbm)
library(boot)
library(tigris)
library(devtools)
library(broom)
library(rworldmap)
library(plyr)
library(ggplot2)
library(ggmap)
library(leaflet)
library(acs)
library(spatial.tools)
library(data.table)
library(vegan)
```


Beta Diversity (NMDS, non-metric multi dimensional scale)
-does things by rank than the absolute number
--look for ways to rarify and and resample, not use an arbitrary value
```{r}
MaumeeMesoComData.whole<-replace.NA(MaumeeMesoComData, O, byRow=FALSE)
#this is to create matrices of the columns with taxa info, and the columns with treatment info
species.matrix<-MaumeeMesoComData[,4:77]
treatment.matrix<-MaumeeMesoComData[,-(4:77)]

# because NMDS doesn't handle rare taxa, we remove those. If there are less than 5% of the taxa, then they are disregarded.
species.matrix<-species.matrix[, colSums(species.matrix)>0.05]

